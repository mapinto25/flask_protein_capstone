<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
        <style>
          #form {
            text-align: center;
            width: 500px;
            margin:auto;
          }
          .form-select {
            margin-bottom: 10px;
          }
          .custom-file-input::before {
            background: linear-gradient(top, #f9f9f9, #e3e3e3);
            border: 1px solid #999;
            border-radius: 3px;
            padding: 5px 8px;
            outline: none;
            white-space: nowrap;
            font-weight: 700;
            font-size: 10pt;
          }
          .tab { margin-left: 40px; }

          .npz {
            color: blue;
          }
        </style>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    </head>
    <body>
      <div>
        <nav class="navbar navbar-default navbar-collapse navbar-expand-lg navbar-light bg-light">
          <div class="container collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item active">
                <a class="nav-link" href="/">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/visualization">Visualization</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/pca">PCA</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/documentation">Documentation</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/bert">Bert Model</a>
              </li>
            </ul>
          </div>
        </nav>
      <div class="jumbotron jumbotron-fluid">
        <div class="container">
          <h1 class="display-4">Welcome to Protein Data Analysis â€“ Enzyme Prediction! </h1>
        </div>
      </div>
      <div class="container">
        <div>
          <p class="lead">Provide us with your protein data, and of the enzymes included in your dataset, our downstream models will predict the respective enzyme classification and provide probability confidence per prediction.
          </p>
          <p>Our method leverages Bidirectional Encoder Representations from Transformermodels to take protein strings as input and output embeddings.</p>
          <p>To start, please run a batch job on Expanse to convert your fasta file to protein sequence embeddings captured in an npz file. If you do not have an account, please create one through XSEDE User Portal linked here.</p>
        </div>
      </div>  
      <div>
        <div class="container">
          <table class="table table-striped">
            <thead>
                <tr>
                    <th>Downstream Model</th>
                    <th>NonEnzyme/Enzyme Accuracy</th>
                    <th>Enzyme Classification Accuracy</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>K-Nearest Neighbors</td>
                    <td>80.8%</td>
                    <td>58.5%</td>
                </tr>
                <tr>
                    <td>Random Forest</td>
                    <td>77.6%</td>
                    <td>63.9%</td>
                </tr>
                <tr>
                    <td>SVC</td>
                    <td>81.2%</td>
                    <td>65.6%</td>
                </tr>
                <tr>
                    <td>Naive Bayes</td>
                    <td>75.6%</td>
                    <td>43.3%</td>
                </tr>
                <tr>
                    <td>MLP Classifier</td>
                    <td>84.1%</td>
                    <td>68.7%</td>
                </tr>          
            </tbody>
          </table>
        </div>
      </div>
         <div id='form'>
          <p>
            Custom BERT Embedding files (*.npz,*.NPZ) and labels files (*.jsoon, *.JSON) can be uploaded to run the downstream models
         </p>
          <form action = "/predict" method = "POST" enctype = "multipart/form-data">
            <p class = "tab">
            <label class='npz' for="npz">Select .npz file</label>
            <input id = 'npz' type = "file" name = "npzfile" value = "Choose .npz file" size = "50" class = "custom-file-input"  z-index="50" placeholder ="Custom.npz">
            <br> <br>
            <label class='npz' 
            for="label">Select labels .json file</label>
            <input id = 'label' type = "file" name = "jsonfile" size = "50" class = "custom-file-input"  z-index="50" placeholder ="Custom.json">
            </p>
          <select class="form-select" aria-label="Default select example" name='model'>
            <option selected>Choose Embeddings</option>
            <option  value="tape">Tape</option>
            <option  value="ESM">ESM</option>
            <option  value="combined">Combined</option>
            <option  value="custom">Custom</option>
          </select>
          <select class="form-select" aria-label="Default select example" name='down_stream_model'>
            <option selected>Choose Downstream Model</option>
            <option  value="deep_learning">MLP</option>
            <option  value="naive">Naives Bayes</option>
            <option  value="knn">KNN</option>
            <option  value="svc">SVC</option>
            <option  value="dtree">Random Forest</option>
          </select>
          <button type='submit' class="btn btn-success">Predict!!!</button>
    </form>
         </div>
    </body>
</html>